apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: open-webui
  namespace: kube-system
spec:
  repo: https://helm.openwebui.com
  chart: open-webui
  targetNamespace: open-webui
  createNamespace: true
  valuesContent: |-
    # Persistence configuration for SQLite database
    persistence:
      enabled: true
      size: 10Gi
      storageClass: longhorn
      accessModes:
        - ReadWriteOnce
    
    # Environment variables matching docker-compose setup
    extraEnvVars:
      - name: WEBUI_AUTH
        value: "false"
      - name: ANONYMIZED_TELEMETRY
        value: "false"
      - name: DO_NOT_TRACK
        value: "true"
      - name: SCARF_NO_ANALYTICS
        value: "true"
    
    # Service configuration
    service:
      type: ClusterIP
      port: 80
      containerPort: 8080

    # External tools: disable everything except OpenAI-compatible API
    ollama:
      enabled: false
    ollamaUrls: []
    pipelines:
      enabled: false

    # OpenAI API configuration (single, fixed endpoint)
    enableOpenaiApi: true
    openaiBaseApiUrl: "http://192.168.20.41:8000/v1"
    openaiBaseApiUrls:
      - "http://192.168.20.41:8000/v1"
    
    # Resource limits (adjust as needed)
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 2000m
        memory: 2Gi



